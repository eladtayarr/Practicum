<!DOCTYPE html>
 <html class="no-js" lang="he" dir="rtl">
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>מנהל || הוספת התקנה חדשה</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="../../images/favicon.ico">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../../src/css/animate.css">
    <link rel="stylesheet" href="../../src/css/icomoon.css">
    <link rel="stylesheet" href="../../src/css/bootstrap.css">
    <link rel="stylesheet" href="../../src/css/superfish.css">
    <link rel="stylesheet" href="../../src/css/flexslider.css">
    <link rel="stylesheet" href="../../src/css/magnific-popup.css">
    <link rel="stylesheet" href="../../src/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="../../src/css/cs-select.css">
    <link rel="stylesheet" href="../../src/css/cs-skin-border.css">
    <link rel="stylesheet" href="../../src/css/style.css">

    <script src="../../src/js/modernizr-2.6.2.min.js"></script>

            <!--  חלונית popup הסברים  -->
    <script src="../../src/js/popup-explain.js"></script>
    <link rel="stylesheet" href="../../src/css/popup-style.css" />


    <style>   
        #footer #fh5co-header-subscribe button {
            position: absolute;
            top: 20px;
            border-top-left-radius: 0px !important;
            border-bottom-left-radius: 0px !important;
            background:rgb(98, 162, 222);
            border: none;
        }

        #header ul#navigation li a:hover{
            color: rgba(52, 124, 68, 0.9);
            font-size: 20px;
        }

        .fh5co-section-gray {
                background: rgba(0, 0, 0, 0);
            }

        .button-container {
            display: flex;
            justify-content: space-around; /* שורה אחת כלפי ימין ושנייה כלפי שמאל */
            margin-bottom: 20px; /* מרווח בין הכפתורים לתוכן אחר, אם יש צורך */
        }

        .btn {
            /* עיצוב נוסף לכפתורים */
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
          }
          th,
          td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
          }
          th {
            background-color: #f4f4f4;
            font-weight: bold;
          }
          td {
            background-color: #fff;
          }
          .Products-table button {
            background-color:rgb(90, 138, 101);
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.3s ease;
          }
          .Products-table button:hover {
            background-color: rgb(38, 152, 191);
          }

    </style>


<header id="fh5co-header-section" class="sticky-banner">
    <div class="container">
        <div class="nav-header">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle dark"><i></i></a>
            <h1 id="fh5co-logo"><a href="HomeManager.html"><i class="icon-home"></i> תריסי סיני <span> בע״מ.</span></a></h1>
            <nav id="fh5co-menu-wrap" role="navigation">
                <ul class="sf-menu" id="fh5co-primary-menu">
                  <li>
                    <a href="../../templates/Manager/ManagerHome.html">דף הבית</a>
                  </li>

                  <li>
                    <a>מוצרים ומלאי</a>
                    <ul class="fh5co-sub-menu">
                      <li><a href="../../templates/Manager/View-ordersRequests.html">צפייה בבקשות להזמנה</a></li>
                      <li><a href="../../templates/Products/allProducts-Manager.html">צפייה בכל המוצרים</a></li>
                      <li><a href="../../templates/Products/addNewProduct-Manager.html">הוספת מוצר חדש</a></li>
                      <li><a href="../../templates/Products/updateProducts-Manager.html">עדכון/מחיקת מוצר קיים</a></li>
                    </ul>
                  </li>

                  <li>
                    <a>הפקת טפסים</a>
                    <ul class="fh5co-sub-menu">
                      <li><a href="../../templates/Forms/ManagerForms.html">צפייה</a></li>
                      <li><a href="../../templates/Forms/Add-ManagerForms.html">הוספה</a></li>
                    </ul>
                  </li>

                  <li>
                    <a>דוחות</a>
                    <ul class="fh5co-sub-menu">
                      <li><a href="../../templates/Reports/Reports-Customer.html">דוח לקוחות</a></li>
<li><a href="../../templates/Reports/Reports-Installer.html">דוח מתקינים</a></li>
                      
                      <li><a href="../../templates/Reports/Reports-Products.html">דוח מוצרים</a></li>
                      <li><a href="../../templates/Reports/Reports-CustomersFeedback.html">דוח משוב לקוחות</a></li>
                    </ul>
                  </li>

                  <li>
                    <a>משתמשים/הרשאות</a>
                    <ul class="fh5co-sub-menu">
                      <li><a href="../../templates/Manager/addNewCustomer-Manager.html">הוספת לקוח חדש</a></li>
                      
                      <li><a href="../../templates/Installer/Add-Installer.html">הוספת מתקין חדש</a></li>
                    </ul>
                  </li>

                  <li>
                    <a>מכרזים</a>
                    <ul class="fh5co-sub-menu">
                      <li><a href="../../templates/Tenders/allTenders.html">צפייה במכרזים</a></li>
                      <li><a href="../../templates/Tenders/addTenders.html">הוספת מכרז חדש</a></li>
                      <li><a href="../../templates/Tenders/updateTenders.html">מחיקה/עריכת מכרז</a></li>
                    </ul>
                  </li>

                  <li>
                    <a>התקנות</a>
                    <ul class="fh5co-sub-menu">
                      <li><a href="../../templates/Installer/View-Installations.html">צפייה בכל ההתקנות</a></li>
                      <li><a href="../../templates/Installer/Add-Installations.html">הוספת התקנה חדשה</a></li>
                      <li><a href="../../templates/Installer/Manage-Installations.html">ניהול התקנות</a></li>
                    </ul>
                  </li>
                  <li>
                  <li><a href="../../templates/Dashbords/Manager/Dashbord-Manager.html">לוח בקרה</a></li>
                  <!-- (?) כפתור העזרה -->
                  <li>
                    <a><svg id="infoIcon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000"><path d="M478-240q21 0 35.5-14.5T528-290q0-21-14.5-35.5T478-340q-21 0-35.5 14.5T428-290q0 21 14.5 35.5T478-240Zm-36-154h74q0-33 7.5-52t42.5-52q26-26 41-49.5t15-56.5q0-56-41-86t-97-30q-57 0-92.5 30T342-618l66 26q5-18 22.5-39t53.5-21q32 0 48 17.5t16 38.5q0 20-12 37.5T506-526q-44 39-54 59t-10 73Zm38 314q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg></a>
                  </li>
                  <!-- חלונית ה-popup -->
                  <div id="popup" class="popup">
                    <div class="popup-content">
                      <span id="closePopup" class="close">&times;</span>
                      <h3 class="popup-title">הוספת התקנה חדשה </h3>
                      <br>
                      <div><h4 class="popup-page-explain"> התקנות חדשות </h4></div>
                      <br>
                      <div class="popup-sec-title"><h7>פעולות בדף</h7><div class="popup-sec-text">
                          <p>◆ <u>הוספה</u> - בדף זה, תוכל להוסיף התקנה חדשה למערכת.</p>
                          <p>◆ <u>לחיצה על כפתור אישור</u> - לאחר לחיצה על כפתור אישור, המערכת תעדכן את פרטי ההתקנה החדשה בבסיס הנתונים.</p>
                          <p>◆ <u>הצגת הודעת הצלחה</u> - לאחר הוספת ההתקנה, תוצג הודעה המודיעה על הצלחה.</p>
                          <p>◆ <u>הצגת שגיאה</u> - אם יש בעיה בהוספת ההתקנה, תוצג הודעת שגיאה.</p>
                          <p>◆ <u>עדכון רשימת המתקינים</u> - כאשר הדף נטען, המערכת שולפת את רשימת המתקינים ומעדכנת את רשימת המתקינים בתיבת הבחירה.</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </ul>
            </nav>
        </div>
    </div>
</header>
	</head>
		

		<aside id="fh5co-hero" class="js-fullheight">
			<div class="flexslider js-fullheight">
				<ul class="slides">
			   	<li style="background-image: url(https://images.unsplash.com/photo-1694253987617-ae47ddace39b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);">
					<div class="overlay"></div>
						<div class="container-fluid">
							<div class="row">
								<div class="col-md-8 col-md-offset-2 text-center js-fullheight slider-text">
									<div class="slider-text-inner">
										<h2 class="heading-title">הוספת התקנות חדשות למערכת</h2>
									</div>
								</div>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</aside>


		<div id="fh5co-blog-section" class="fh5co-section-gray">
            <div class="container">
                <div class="row">
                    <div class="col-md-8 col-md-offset-2 text-center heading-section animate-box">
                        <h3>הוספת התקנה חדשה</h3>
                    </div>
                </div>
            </div>
			
			<div class="container">
                    <form id="installationForm" action="/addMeeting" method="POST">
						<!-- מספר לקוח -->
						<div class="form-group">
							<label for="customerID">קוד לקוח:</label>
							<input type="text" class="form-control" id="customerID" name="customerID" required>
						</div>

						<!-- מספר מתקין -->
						<div class="form-group">
              <label for="installerID">קוד מתקין:</label>
              <select class="form-control" id="installerID" name="installerID" required>
                <option value="">בחר מתקין</option>
              </select>
            </div>

						<!-- תאריך התקנה -->
						<div class="form-group">
							<label for="date">תאריך התקנה:</label>
							<input type="date" class="form-control" id="date" name="date" required>
						</div>

						<!-- שעת התקנה -->
						<div class="form-group">
							<label for="time">שעת התקנה:</label>
							<select class="form-control" id="time" name="time" required>
								<option value="">בחר שעה</option>
								<option value="09:00">09:00</option>
								<option value="12:00">11:00</option>
								<option value="15:00">15:00</option>
								<option value="17:00">17:00</option>
								<option value="19:00">19:00</option>
							</select>
						</div>

						<!-- מיקום ההתקנה -->
						<div class="form-group">
							<label for="location">מיקום ההתקנה:</label>
							<input type="text" class="form-control" id="location" name="location" required>
						</div> 

						<!-- סוג ההתקנה/הפגישה -->
						<div class="form-group">
						<label for="meetingType">סוג ההתקנה/הפגישה:</label>
							<select class="form-control" id="meetingType" name="meetingType" required>
								<option value="">בחר את סוג ההתקנה/הפגישה</option>
								<option value="לקיחת מידות">לקיחת מידות</option>
								<option value="התקנת מוצר חדש">התקנת מוצר חדש</option>
								<option value="החלפת מוצר קיים">החלפת מוצר קיים</option>
								<option value="כביסות">כביסות</option>
							</select>
						</div>
						
						<!-- כפתור הוספת ההתקנה -->
						<button type="submit" class="btn btn-primary" id="sub">הוסף פגישה</button><br><br>
						<div id="successMessage" style="display: none;" class="alert alert-success" role="alert">
							הפגישה התווספה בהצלחה!
						</div>
					</form>
                </div>
            </div>
			
			<footer>
				<div id="footer">
				  <div class="container">
					<div class="row row-bottom-padded-md">
					  <!-- זכויות יוצרים -->
					  <p style="font-size:20px;">
						&copy; <span id="year"></span>כל הזכויות שמורות לתריסי סיני בע״מ.<br/>
						<p style="font-size:18px;">האתר נבנה ומנוהל על ידי:<br> 
						  אלעד טייר | ליאור סיני | אור מנחם | תאיר מלכה</p>
						<a style="color: #0077b6; text-decoration: none; font-weight:500 ">Terms of Use</a>|<a style="color: #0077b6; text-decoration: none; font-weight:500">Privacy Policy</a>
					  </p>
					  
					</div>
					
				  </div>
				</div>
			  </footer>

	</div>
	</div>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
      // מילוי רשימת המתקינים
      fetch("/getInstallers")
        .then((response) => response.json())
        .then((installers) => {
          const select = document.getElementById("installerID");
          installers.forEach((installer) => {
            // אפשר להציג גם שם, לא רק קוד
            const option = document.createElement("option");
            option.value = installer.InstallerID || installer._id || "";
            option.textContent = installer.InstallerID
              ? `${installer.InstallerID} - ${installer.FullName || ""}`
              : installer.FullName || "";
            select.appendChild(option);
          });
        })
        .catch((error) => {
          console.error("בעיה בשליפת מתקינים:", error);
        });
    });

		document.addEventListener("DOMContentLoaded", function () {
			document.getElementById("installationForm").addEventListener("submit", function (event) {
				event.preventDefault();
		
				// Ensure Date Format YYYY-MM-DD
				const dateInput = document.getElementById("date").value;
				const dateRegex = /^\d{4}-\d{2}-\d{2}$/; // Regular expression for YYYY-MM-DD
		
				if (!dateRegex.test(dateInput)) {
					alert("אנא הכנס את תאריך ההתקנה בפורמט YYYY-MM-DD.");
					return;
				}
		
				// Collect form data
				const formData = new FormData(this);
				const data = {};
				formData.forEach((value, key) => {
					data[key] = value;
				});
		
				// Debugging: Log the data being sent
				console.log("Form Data:", data);
		
				// Send to backend
				fetch("/addInstallationMeeting", {
					method: "POST",
					headers: { "Content-Type": "application/json" },
					body: JSON.stringify(data),
				})
				.then(response => response.json())
				.then(result => {
					if (result.error) {
						alert("Error: " + result.error);
					} else {
						alert("ההתקנה התווספה בהצלחה למערכת!");
						location.reload();
					}
				})
				.catch(error => console.error("Error:", error));
			});
		});
	</script>
		



    <script src="../../src/js/jquery.min.js"></script>
    <script src="../../src/js/jquery.easing.1.3.js"></script>
    <script src="../../src/js/bootstrap.min.js"></script>
    <script src="../../src/js/jquery.waypoints.min.js"></script>
    <script src="../../src/js/sticky.js"></script>
    <script src="../../src/js/hoverIntent.js"></script>
    <script src="../../src/js/superfish.js"></script>
    <script src="../../src/js/jquery.flexslider-min.js"></script>
    <script src="../../src/js/bootstrap-datepicker.min.js"></script>
    <script src="../../src/js/classie.js"></script>
    <script src="../../src/js/selectFx.js"></script>
    <script src="../../src/js/main.js"></script>
	</body>
</html>
