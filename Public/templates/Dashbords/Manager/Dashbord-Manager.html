<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link rel="stylesheet" href="/src/css/animate.css" />
    <link rel="stylesheet" href="/src/css/icomoon.css" />
    <link rel="stylesheet" href="/src/css/bootstrap.css" />
    <link rel="stylesheet" href="/src/css/superfish.css" />
    <link rel="stylesheet" href="/src/css/flexslider.css" />
    <link rel="stylesheet" href="/src/css/magnific-popup.css" />
    <link rel="stylesheet" href="/src/css/bootstrap-datepicker.css" />
    <link rel="stylesheet" href="/src/css/cs-select.css" />
    <link rel="stylesheet" href="/src/css/cs-skin-border.css" />
    <link rel="stylesheet" href="/src/css/style.css" />

    <link rel="icon" type="image/png" href="../assets/img/favicon.png" />
    <title>Trisi Sinai || Practicum</title>
    <!--     Fonts and icons     -->
    <link
      href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700,800"
      rel="stylesheet"
    />
    <!-- Nucleo Icons -->
    <link
      href="https://demos.creative-tim.com/soft-ui-dashboard/assets/css/nucleo-icons.css"
      rel="stylesheet"
    />
    <link
      href="https://demos.creative-tim.com/soft-ui-dashboard/assets/css/nucleo-svg.css"
      rel="stylesheet"
    />
    <!-- Font Awesome Icons -->
    <script
      src="https://kit.fontawesome.com/42d5adcbca.js"
      crossorigin="anonymous"
    ></script>
    <!-- CSS Files -->
    <link
      id="pagestyle"
      href="assets/css/soft-ui-dashboard.css?v=1.1.0"
      rel="stylesheet"
    />
    <!-- Nepcha Analytics (nepcha.com) -->
    <!-- Nepcha is a easy-to-use web analytics. No cookies and fully compliant with GDPR, CCPA and PECR. -->
  </head>
  
  <header id="fh5co-header-section" class="sticky-banner">
    <div class="container">
      <div class="nav-header">
        <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle dark"><i></i></a>
        <h1 id="fh5co-logo">
          <a href="HomeManager.html"
            ><i class="icon-home"></i> Trisi Sinai <span> Ltd.</span></a
          >
        </h1>
        <nav id="fh5co-menu-wrap" role="navigation">
          <ul class="sf-menu" id="fh5co-primary-menu">
            <li class="active">
              <a href="../../templates/Manager/HomeManager.html">Home</a>
            </li>
            <li>
              <a>Products</a>
              <ul class="fh5co-sub-menu">
                <li>
                  <a
                    href="../../templates/Products/allProducts-Manager.html"
                    >View All Products</a
                  >
                </li>
                <li>
                  <a
                    href="../../templates/Products/addNewProduct-Manager.html"
                    >Add New Product</a
                  >
                </li>
                <li>
                  <a
                    href="../../templates/Products/updateProducts-Manager.html"
                    >Update Product</a
                  >
                </li>
              </ul>
            </li>
            <!-- New "Deals" tab containing "Deal" and "Deals View" links -->
            <li>
              <a>Deals</a>
              <ul class="fh5co-sub-menu">
                <li>
                  <a href="/../../templates/Manager/DealsV-Manager.html"
                    >View All Deals</a
                  >
                </li>
                <li>
                  <a href="../../templates/Manager/addD-Manager.html"
                    >Add New Deal</a
                  >
                </li>
              </ul>
            </li>

            <li>
              <a>Manage</a>
              <ul class="fh5co-sub-menu">
                <li>
                  <a
                    href="../../templates/Manager/addNewCustomer-Manager.html"
                    >Add New Customer</a
                  >
                </li>
                <li>
                  <a
                    href="../../templates/Manager/Add_ViewUsers-Manager.html"
                    >Add New Users</a
                  >
                </li>
                <li>
                  <a
                    href="../../templates/Installer/Add-Installations.html"
                    >Add New Installer</a
                  >
                </li>
              </ul>
            </li>
            <li>
              <a>Installations</a>
              <ul class="fh5co-sub-menu">
                <li>
                  <a
                    href="../../templates/Installer/View-Installations.html"
                    >View All Installations</a
                  >
                </li>
                <li>
                  <a href="../../templates/Installer/add-Installer.html"
                    >Add New Installation</a
                  >
                </li>
              </ul>
            </li>
            <li>
              <a>Reports</a>
              <ul class="fh5co-sub-menu">
                <li>
                  <a href="../../templates/Reports/Reports-Customer.html"
                    >Customers Reports</a
                  >
                </li>
                <li>
                  <a href="../../templates/Reports/Reports-Deal.html"
                    >Deals Reports</a
                  >
                </li>
                <li>
                  <a href="../../templates/Reports/Reports-Products.html"
                    >Products Reports</a
                  >
                </li>
              </ul>
            </li>
            <li>
              <a
                href="../../templates/Dashbords/Manager/Dashbord-Manager.html"
                >Manager Dashbord</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

<style>
  @import url('https://fonts.googleapis.com/css?family=Roboto&display=swap');

/* Declaration de variables en CSS */
:root
{
    --color-white: white;
    --color-black: black;
    --color-grey: #CECECE;
    --color-primary: #7385F2;
}

*
{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body
{
    font-family: 'Roboto', sans-serif;
}

/* CSS of Side Barre */

.sideBarre
{
    width: 260px;
    height: 120vh;
    background-color:var(--color-white);
    border: 1px solid var(--color-grey);
    position: fixed;
}

.sideBarre__logo
{
    display: flex;
    height: 70px;
    align-items: center;
    justify-content: center;
    border-bottom: 1px solid var(--color-grey);
}

.sideBarre__cercle
{
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--color-primary);
    margin-right: 8px;
}

.sideBarre__logo h1
{
    color: var(--color-primary);
}

.sideBarre__menu ul li
{
    list-style: none;
    padding: 18px;
    transition: all .3s
}

.sideBarre__menu ul li:hover
{
    border-right: 4px solid var(--color-primary);
    background-color: aliceblue;
}

.sideBarre__menu ul li a
{
    text-decoration: none;
    color: var(--color-black);
}

.sideBarre__menu ul li:hover a
{
    color: var(--color-primary);
}

/* CSS of Main Content */

.mainContent
{
    background-color:#F4F4FA;;
}

/* CSS of NavBar */

.mainContent nav
{
    height: 70px;
    background-color: var(--color-white);
    padding: 0 30px;
}

nav .user
{
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: var(--color-primary);
    float: right;
    margin-top: 10px;
}

/* CSS of Box Content */

.boxContent
{
    padding: 70px 30px;
}

/* CSS of First Row */

.firstRow, .secondRow
{
    display: flex;
}

.cardOne, .cardTwo, .cardThree, .cardFour
{
    flex: 1;
    height: 180px;
    border-radius: 7px;
    margin-right: 15px;
    position: relative;
}

.cardOne
{
    background: linear-gradient(90deg,rgb(96, 111, 208),rgb(138, 215, 254));
}

.cardTwo
{
    background: linear-gradient(90deg,rgb(138, 215, 254), #FF749C);
}

.cardThree
{
    background: linear-gradient(90deg,rgb(138, 215, 254), #FF914E);
}

.cardFour
{
    background: linear-gradient(90deg,rgb(138, 215, 254), #729FFE);
}

.description
{
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: var(--color-white);
}

.description h3
{
    font-size: 40px;
}


/* CSS of Second Row */

.secondRow
{
    margin-top: 50px;
}

.cardChart
{
    flex: 1;
    margin-right: 15px;
    background-color: var(--color-white);
    height: 500px;
    border-radius: 7px;
    box-shadow: 0px 0px 30px -18px rgba(0, 0, 0, 0.55);
}

/* CSS of Third Row */

.thirdRow
{
    height: 120px;
    width: 100%;
    background-color: var(--color-white);
    box-shadow: 0px 0px 30px -18px rgba(0, 0, 0, 0.55);
    margin-top: 50px;
    border-radius: 7px;
    margin-right: 15px;
}
</style>




  <body>

    <!-- My Side Barre -->
    <!-- My Main Content -->
    <div class="mainContent">
        <div>
          
        </div>

        <!-- My Box Content -->
        <div class="boxContent">
            <div class="firstRow">
                <div class="cardOne">
                    <div class="description">
                        <h4 style="font-size:30px; font-weight:900; color:white;">Total Customers</h4>
                        <h3 id="totalCustomers">Loading...</h3>
                    </div>
                </div>

                <div class="cardTwo">
                    <div class="description">
                      <h4 style="font-size:30px; font-weight:900; color:white;">Total Products</h4>
                      <h3 id="totalProducts">Loading...</h3>
                  </div>
                </div>

                <div class="cardThree">
                  <div class="description">
                    <h4 style="font-size:30px; font-weight:900; color:white;">Total Installers</h4>
                    <h3 id="totalInstallers">Loading...</h3>
                </div>
                </div>
                <div class="cardFour">
                    <div class="description">
                        <p>Total invoices</p>
                        <h3>98765</h3>
                    </div>
                </div>
            </div>
            <div class="secondRow">
                <div class="cardChart">

                </div>
                <div class="cardChart">

                </div>
                <div class="cardChart">

                </div>
            </div>
            <div class="thirdRow">

            </div>
        </div>
    </div>

</body>





 <!-- <script>
    document.addEventListener("DOMContentLoaded", async function () {
      try {
        const response = await fetch("/dashboard-data"); // קריאה לנתיב בשרת
        if (!response.ok) {
          throw new Error("Failed to fetch dashboard data");
        }

        const data = await response.json();
        const totalCustomersElement = document.getElementById("totalCustomers");
        if (data.customersCount !== undefined) {
          totalCustomersElement.textContent = data.customersCount; // עדכון המספר בדף
        } else {
          totalCustomersElement.textContent = "No data available";
        }
      } catch (error) {
        console.error("Error fetching dashboard data:", error);
        const totalCustomersElement = document.getElementById("totalCustomers");
        totalCustomersElement.textContent = "Error loading data";
      }
    });
  </script>-->
  <script>
    document.addEventListener("DOMContentLoaded", async function () {
      try {
        // Fetch customer data
        const customerResponse = await fetch("/dashboard-data/customers");
        if (!customerResponse.ok) {
          throw new Error("Failed to fetch customer data");
        }
        const customerData = await customerResponse.json();
        document.getElementById("totalCustomers").textContent =
          customerData.customersCount || "No data";

        // Fetch product data
        const productResponse = await fetch("/dashboard-data/products");
        if (!productResponse.ok) {
          throw new Error("Failed to fetch product data");
        }
        const productData = await productResponse.json();
        document.getElementById("totalProducts").textContent =
          productData.productsCount || "No data";
      
        const installerResponse = await fetch("/dashboard-data/installers");
        if (!installerResponse.ok) {
          throw new Error("Failed to fetch installer data");
        }
        const installerData = await installerResponse.json();
        document.getElementById("totalInstallers").textContent =
        installerData.installersCount || "No data";
        }
      
      catch (error) {
        console.error("Error loading data:", error);
        document.getElementById("totalCustomers").textContent = "Error loading customers";
        document.getElementById("totalProducts").textContent = "Error loading products";
        document.getElementById("totalInstallers").textContent = "Error loading products";
        
      }

      
    });
  </script>
  


</body>

  
  
  </html>