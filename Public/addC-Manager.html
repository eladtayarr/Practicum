<!DOCTYPE html>
<html class="no-js">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>practicum</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Template by FREEHTML5.CO" />
	<meta name="keywords" content="free html5, free template, free bootstrap, html5, css3, mobile first, responsive" />
	<meta name="author" content="FREEHTML5.CO" />
	<link rel="shortcut icon" href="favicon.ico">
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,300' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/animate.css">
	<link rel="stylesheet" href="css/icomoon.css">
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/superfish.css">
	<link rel="stylesheet" href="css/flexslider.css">
	<link rel="stylesheet" href="css/magnific-popup.css">
	<link rel="stylesheet" href="css/bootstrap-datepicker.min.css">
	<link rel="stylesheet" href="css/cs-select.css">
	<link rel="stylesheet" href="css/cs-skin-border.css">
	<link rel="stylesheet" href="css/style.css">
	<script src="js/modernizr-2.6.2.min.js"></script>
	<style>
		.customer-card {

			
			background-color: #ffffff;
			border-radius: 10px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			margin-bottom: 20px;
			transition: transform 0.3s ease;
			text-align: center;


		}

		#customersList {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
			grid-gap: 20px;
			/* מרווחים בין הכרטיסים */
			font-family: 'Open Sans', sans-serif;
			color: #333;
			
		}



		/* Styling for customer ID input */
		#customerID {
			padding: 8px;
			border: 1px solid #ccc;
			border-radius: 3px;
			background-color: #fff;
			font-size: 14px;
			color: #333;
			width: 100%;
			box-sizing: border-box;
			margin-bottom: 15px;
		}

		#customerID:hover {
			border-color: #999;
		}

		#customerID:focus {
			outline: none;
			border-color: #dfb4c6;
			box-shadow: 0 0 5px rgba(227, 139, 208, 0.5);
		}


		.customer-card:hover {
			transform: translateY(-5px);
		}

		.customer-card p {
			margin: 5px 0;
			font-size: 16px;
			color: #333333;
			font-weight: bold;
		}


		.customer-card .customer-icon {
			margin-right: 10px;
		}


		.customer-card img {
			width: 100px;
			height: 100px;
			border-radius: 50%;
			margin-bottom: 10px;
			margin-top: 10px;
			object-fit: cover;
		}

		.customer-row {
			background-color: #f9f9f9;
			border: 1px solid #ddd;
			border-radius: 5px;
			margin-bottom: 15px;
			padding: 15px;
		}

		.search-container {
        text-align: center;
        margin-bottom: 20px;
    }

	.search-container input[type=text] {
        width: 60%;
        padding: 12px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        margin-right: 10px;
        font-size: 16px;
    }

    .search-container button {
        background-color:  #de6277;;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
    }

    .search-container button:hover {
        background-color:  #d80f48;
    }
	.fh5co-section-gray {
    background: rgba(0, 0, 0, 0);
}
#fh5co-blog-section{
  clear: both;
  padding: 0;
}
#footer #fh5co-header-subscribe button {
    position: absolute;
    top: 20px;
    right: -20px;
    border-top-left-radius: 0px !important;
    border-bottom-left-radius: 0px !important;
    background: #de6277;
    border: none;
}
	</style>
</head>

<body>
	<div id="fh5co-wrapper">
		<div id="fh5co-page">
			<header id="fh5co-header-section" class="sticky-banner">
				<div class="container">
					<div class="nav-header">
						<a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle dark"><i></i></a>
						<h1 id="fh5co-logo"><a href="HomeManager.html"><i class="icon-home"></i> Heh B’iyar <span> Real Estate</span></a></h1>
						<nav id="fh5co-menu-wrap" role="navigation">
							<ul class="sf-menu" id="fh5co-primary-menu">
								<li class="active"><a href="HomeManager.html">Home</a></li>
								<li>
									<a>Assets</a>
									<ul class="fh5co-sub-menu">
										<li><a href="all-Manager.html">View</a></li>
										<li><a href="addA-Manager.html">Add</a></li>
										<li><a href="updateA-Manager.html">Update</a></li>
									</ul>
								</li>
								<!-- New "Deals" tab containing "Deal" and "Deals View" links -->
								<li>
									<a>Deals</a>
									<ul class="fh5co-sub-menu">
										<li><a href="addD-Manager.html">Add</a></li>
										<li><a href="DealsV-Manager.html">View</a></li>
									</ul>
								</li>
								<li><a href="blog-Manager.html">Blog</a></li>

								<li>
									<a>Manage</a>
									<ul class="fh5co-sub-menu">
										<li><a href="addC-Manager.html">Customer</a></li>
										<li><a href="users-Manager.html">Users</a></li>
									</ul>
								</li>
								<li>
									<a>Meetings</a>
									<ul class="fh5co-sub-menu">
										<li><a href="meetingA-Manager.html">Add</a></li>
										<li><a href="meetingV-Manager.html">View</a></li>
									</ul>
								</li>
								<li>
									<a>Reports</a>
									<ul class="fh5co-sub-menu">
										<li><a href="CustomerR.html">Customers</a></li>
										<li><a href="DealR.html">Deals</a></li>
										<li><a href="AssetR.html">Assets</a></li>
									</ul>
								</li>
								<li><a href="Dashbord.html">Dashbord</a></li>
							</ul>
						</nav>
					</div>
				</div>
			</header>

			<aside id="fh5co-hero" class="js-fullheight">
				<div class="flexslider js-fullheight">
					<ul class="slides">
						<li style="background-image: url(images/cov.png);">
							<div class="overlay"></div>
							<div class="container-fluid">
								<div class="row">
									<div class="col-md-8 col-md-offset-2 text-center js-fullheight slider-text">
										<div class="slider-text-inner">
											<h2 class="heading-title">Customer</h2>
											<p class="fh5co-lead"><i class="icon-heart3"></i> </p>
										</div>
									</div>
								</div>
							</div>
						</li>
					</ul>
				</div>
			</aside>

			<div id="fh5co-blog-section" class="fh5co-section-gray">
				<div class="container">
					<div class="row">
						<div class="col-md-8 col-md-offset-2 text-center heading-section animate-box">
							<br><br><br><br>
							<h3>View All Customers</h3><br>
								<div class="search-container">
								<input type="text" id="customerIDFilter" placeholder="Enter Customer ID">
								<button type="button" id="filterBtn" class="btn btn-primary" >Filter</button>
							</div>
						</div>
						</div>
				</div>
		
		
				<div class="col-md-8 col-md-offset-2 text-center heading-section animate-box">
				<div class="card" id="customersList">
					<div class="container">
						<div class="container" id="customersListContainer">
							<div class="row row-bottom-padded-md">
								<div class="col-lg-4 col-md-4 col-sm-6">
									<div class="fh5co-customer animate-box">


										<div class="row row-bottom-padded-md" id="customersList">
											<div class="clearfix visible-sm-block"></div>
											<div class="clearfix visible-sm-block"></div>
											<div class="clearfix visible-md-block"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			
		</div>
	
			<div id="fh5co-blog-section" class="fh5co-section-gray">
				<div style="border-bottom: 5px solid rgb(255, 255, 255);"></div>
				<div class="container">
					<div class="row">
						<div class="col-md-8 col-md-offset-2 text-center heading-section animate-box">
							<br><br><br><br>
							<h3>Add New Customer</h3>
						</div>
					</div>
				</div>

				<div class="container">
					<form id="customerForm" action="/addCustomer" method="POST">
						<div class="form-group">
							<label for="customerID">Customer ID:</label>
							<input type="text" class="form-control" id="customerID" name="customerID" required>
						</div>
						<div class="form-group">
							<label for="UserName">Customer's User Name:</label>
							<input type="text" class="form-control" id="UserName" name="UserName" required>
						</div>
						<div class="form-group">
							<label for="fullName">Full Name:</label>
							<input type="text" class="form-control" id="fullName" name="fullName" required>
						</div>
						<div class="form-group">
							<label for="phone">Phone:</label>
							<input type="tel" class="form-control" id="phone" name="phone" required>
						</div>
						<div class="form-group">
							<label for="email">Email:</label>
							<input type="email" class="form-control" id="email" name="email" required>
						</div>
						<div class="form-group" style="display: none;">
							<label for="joinDate">Join Date:</label>
							<input type="text" class="form-control" id="joinDate" name="joinDate" value="" disabled>
						</div>
						<div class="form-group">
							<label for="customerType">Customer Type:</label>
							<select class="form-control" id="customerType" name="customerType" required>
								<option value="">Select Customer Type</option>
								<option value="Buyer">Buyer</option>
								<option value="Seller">Seller</option>
								<option value="Renter">Renter</option>
								<option value="Renting">Renting</option>
							</select>
						</div>
						<button type="submit" class="btn btn-primary" id="sub">Submit</button><br><br>
						<div id="successMessage" style="display: none;" class="alert alert-success" role="alert">
							Customer added successfully!
						</div>
						<div id="errorMessage" style="display: none;" class="alert alert-danger" role="alert">
							Failed to add customer. The ID you entered already exists.
						</div><br><br><br><br>
					
				
			
					
		
			
		</form>
			</div>
		</div>
			</div>
			<footer>
				<div id="footer">
					<div class="container">
						<div class="row row-bottom-padded-md">
							<div class="col-md-3">
								<h3 class="section-title">About Us</h3>
								<p>We, Bar Michal and Nofar, information systems management students at the College of
									Management, own all the exclusive rights to this website <i class="icon-heart3"></i>
								</p>
							</div>

							<div class="col-md-3 col-md-push-1">
								<h3 class="section-title">Links</h3>
								<ul>
									<li><a href="#">Home</a></li>
									<li><a href="#">Assets</a></li>
									<li><a href="#">Agent</a></li>
									<li><a href="#">Blog</a></li>
									<li><a href="#">Contact</a></li>
								</ul>
							</div>

							<div class="col-md-3">
								<h3 class="section-title">Information</h3>
								<ul>
									<li><a href="#">Terms &amp; Condition</a></li>
									<li><a href="#">License</a></li>
									<li><a href="#">Privacy &amp; Policy</a></li>
									<li><a href="#">Contact Us</a></li>
								</ul>
							</div>
							<div class="col-md-3">
								<h3 class="section-title">Newsletter</h3>
								<p>Subscribe for our newsletter</p>
								<form class="form-inline" id="fh5co-header-subscribe">
									<div class="row">
										<div class="col-md-12 col-md-offset-0">
											<div class="form-group">
												<input type="text" class="form-control" id="email"
													placeholder="Enter your email">
												<button type="submit" class="btn btn-default"><i
														class="icon-paper-plane"></i></button>
											</div>
										</div>
									</div>
								</form>
							</div>
						</div>
						<div class="row">
							<div class="col-md-12">
								<p class="fh5co-social-icons">
									<a href="#"><i class="icon-twitter2"></i></a>
									<a href="#"><i class="icon-facebook2"></i></a>
									<a href="#"><i class="icon-instagram"></i></a>
									<a href="#"><i class="icon-dribbble2"></i></a>
									<a href="#"><i class="icon-youtube"></i></a>
								</p>
							</div>
						</div>
					</div>
				</div>
				
			</footer>
		</div>
	</div>

	<script src="js/jquery.min.js"></script>
	<script src="js/jquery.easing.1.3.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.waypoints.min.js"></script>
	<script src="js/sticky.js"></script>
	<script src="js/hoverIntent.js"></script>
	<script src="js/superfish.js"></script>
	<script src="js/jquery.flexslider-min.js"></script>
	<script src="js/bootstrap-datepicker.min.js"></script>
	<script src="js/classie.js"></script>
	<script src="js/selectFx.js"></script>
	<script src="js/main.js"></script>


	<script>
		document.addEventListener("DOMContentLoaded", function () {
			var form = document.getElementById("customerForm");
			form.addEventListener("submit", function (event) {
				event.preventDefault();

				var formData = new FormData(form);
				var data = {};
				formData.forEach(function (value, key) {
					data[key] = value;
				});
				     // Add current month name to the data object
					 var currentDate = new Date();
		var formattedDate = currentDate.toLocaleDateString('en-GB', {
			day: 'numeric',
			month: 'numeric',
			year: 'numeric'
		});

		data['joinDate'] = formattedDate;

        console.log(data);

				// Send data to server
				fetch("/AddCustomer", {
					method: "POST",
					headers: {
						"Content-Type": "application/json"
					},
					body: JSON.stringify(data)
				})
					.then(function (response) {
						if (response.ok) {
							document.getElementById("successMessage").style.display = "block";
							console.log("Customer added successfully");
							setTimeout(function () {
								location.reload();
							}, 3000);
						} else {
							response.json().then(function (data) {
								if (data.error) {
									document.getElementById("errorMessage").innerText = data.error;
									document.getElementById("errorMessage").style.display = "block";
								}
							});
						}
					})
					.catch(function (error) {
						console.error("Error:", error);
					});
			});
		});

		document.addEventListener("DOMContentLoaded", function () {
			fetch("/getCustomers")
				.then(response => {
					if (!response.ok) {
						throw new Error("Network response was not ok");
					}
					return response.json();
				})
				.then(data => {
					console.log(data); // Add this line to inspect the data returned from the server
					const customersList = document.getElementById("customersList");
					customersList.innerHTML = ""; // Clear the list before adding new items
					data.forEach(customer => {
						const customerElement = document.createElement("div");
						customerElement.classList.add('customer-row');
						customerElement.innerHTML = `
   				 <div class="customer-card">
				<img src="https://as1.ftcdn.net/jpg/05/53/79/60/220_F_553796090_XHrE6R9jwmBJUMo9HKl41hyHJ5gqt9oz.jpg" alt="User Avatar">
                    <p>Customer ID: ${customer.CustomerID}</p>
                    <p>Name: ${customer.FullName}</p>
                    <p>Phone: ${customer.Phone}</p>
                    <p>Email: ${customer.Email}</p>
					<p>Type: ${customer.CustomerType}</p>
                    <hr>
                `;
						customersList.appendChild(customerElement);
					});
				})
				.catch(error => console.error("Error:", error));
		});
		document.addEventListener("DOMContentLoaded", function () {
    // קבלת הקישור לכפתור הסינון
    var filterBtn = document.getElementById("filterBtn");
    // הוספת אירוע לחיצה על כפתור הסינון
    filterBtn.addEventListener("click", function () {
        var customerIDFilter = document.getElementById("customerIDFilter").value;
        // אם לא נבחר כלום בתיבת הסינון, נציג את כל הלקוחות
        if (!customerIDFilter) {
            showAllCustomers();
        } else {
            // קריאה לפונקציה שתבצע את הסינון
            filterCustomers(customerIDFilter);
        }
    });

    // פונקציה להצגת כל הלקוחות
    function showAllCustomers() {
        fetch("/getCustomers")
        .then(response => response.json())
        .then(data => {
            // הצגת כל הלקוחות
            displayCustomers(data);
        })
        .catch(error => {
            console.error('Error fetching all customers:', error);
        });
    }

    // פונקציה לסינון לקוחות לפי ID
    function filterCustomers(customerIDFilter) {
        fetch(`/getCustomerID?customerID=${customerIDFilter}`)
        .then(response => {
            if (!response.ok) {
                throw new Error("Network response was not ok");
            }
            return response.json();
        })
        .then(data => {
            // בדיקה של הנתונים המתקבלים
            console.log(data);
            const customersList = document.getElementById("customersList");
            customersList.innerHTML = ""; // ניקוי הרשימה לפני הוספת הפריטים המסוננים
            
            const customerElement = document.createElement("div");
            customerElement.classList.add('customer-row');
            customerElement.innerHTML = `
                <div class="customer-card">
                    <img src="https://as1.ftcdn.net/jpg/05/53/79/60/220_F_553796090_XHrE6R9jwmBJUMo9HKl41hyHJ5gqt9oz.jpg" alt="User Avatar">
                    <p>Customer ID: ${data.CustomerID}</p>
                    <p>Name: ${data.FullName}</p>
                    <p>Phone: ${data.Phone}</p>
                    <p>Email: ${data.Email}</p>
                    <p>Type: ${data.CustomerType}</p>
                    <hr>
                </div>
            `;
            customersList.appendChild(customerElement);
        })
        .catch(error => console.error("Error:", error));
    }

    // פונקציה להצגת הלקוחות ב-DOM (לדוגמה)
    function displayCustomers(customers) {
        const customersList = document.getElementById("customersList");
        customersList.innerHTML = ""; // ניקוי הרשימה הקיימת
        
        customers.forEach(customer => {
            const customerElement = document.createElement("div");
            customerElement.classList.add('customer-row');
            customerElement.innerHTML = `
                <div class="customer-card">
                    <img src="https://as1.ftcdn.net/jpg/05/53/79/60/220_F_553796090_XHrE6R9jwmBJUMo9HKl41hyHJ5gqt9oz.jpg" alt="User Avatar">
                    <p>Customer ID: ${customer.CustomerID}</p>
                    <p>Name: ${customer.FullName}</p>
                    <p>Phone: ${customer.Phone}</p>
                    <p>Email: ${customer.Email}</p>
                    <p>Type: ${customer.CustomerType}</p>
                    <hr>
                </div>
            `;
            customersList.appendChild(customerElement);
        });
    }
});

 



	</script>
</body>

</html>